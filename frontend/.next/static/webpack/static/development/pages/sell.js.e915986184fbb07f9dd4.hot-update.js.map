{"version":3,"file":"static/webpack/static/development/pages/sell.js.e915986184fbb07f9dd4.hot-update.js","sources":["webpack:///./components/CreateItem.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Mutation } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport Router from 'next/router';\nimport Form from \"./styles/Form\";\nimport formatMoney from \"../lib/formatMoney\";\nimport Error from './ErrorMessage';\n\nconst CreateItem = () => {\n  const CREATE_ITEM_MUTATION = gql`\n    mutation CREATE_ITEM_MUTATION(\n      $title: String!\n      $description: String!\n      $price: Int!\n      $image: String\n      $largeImage: String\n    ) {\n      createItem(\n        title: $title\n        description: $description\n        price: $price\n        image: $image\n        largeImage: $largeImage\n      ) {\n        id\n      }\n    }\n  `;\n\n  const [state, setState] = useState({\n    title: \"Cool Shoes\",\n    description: \"Love those dude\",\n    image: \"dog.jpg\",\n    largeImage: \"large-dog.jpg\",\n    price: 1000,\n  });\n\n  const handleChange = (e) => {\n    const { name, type, value } = e.target;\n    const val = type === \"number\" ? parseFloat(value) : value;\n    // remember to spread prevState and then add your updates to state\n    setState((prevState) => ({\n      ...prevState,\n      [name]: val,\n    }));\n  };\n\n   const uploadFile = async (e) => {\n    console.log('uploading file');\n    const files = e.target.files;\n    const data = new FormData();\n    data.append('file', files[0]);\n    data.append('upload_preset', 'sick-fits');\n\n    const res = await fetch (\n      'https://api.cloudinary.com/v1_1/dinw8ffby/image/upload', {\n        method: 'POST',\n        body: data\n      }\n    );\n    const file = await res.json();\n    console.log(file);\n  }\n\n  return (\n    <Mutation mutation={CREATE_ITEM_MUTATION} variables={state}>\n      {(createItem, { loading, error }) => (\n        <Form\n          onSubmit={async (e) => {\n            // stop form from submitted\n            e.preventDefault();\n            // call mutation\n            const res = await createItem();\n            // change page to single item page\n            console.log(res);\n            Router.push({\n              pathname: \"/item\",\n              query: { id: res.data.createItem.id },\n            });\n          }}\n        >\n          <Error error={error} />\n          <fieldset disabled={loading} aria-busy={loading}>\n            <label htmlFor=\"file\">\n              Image\n              <input\n                type=\"file\"\n                id=\"file\"\n                name=\"file\"\n                placeholder=\"Upload on image\"\n                required\n                onChange={uploadFile}\n              />\n            </label>\n            <label htmlFor=\"title\">\n              Title\n              <input\n                type=\"text\"\n                id=\"title\"\n                name=\"title\"\n                placeholder=\"Title\"\n                required\n                value={state.title}\n                onChange={handleChange}\n              />\n            </label>\n\n            <label htmlFor=\"price\">\n              Price\n              <input\n                type=\"number\"\n                id=\"price\"\n                name=\"price\"\n                placeholder=\"Price\"\n                required\n                value={state.price}\n                onChange={handleChange}\n              />\n            </label>\n\n            <label htmlFor=\"description\">\n              Price\n              <textarea\n                id=\"description\"\n                name=\"description\"\n                placeholder=\"Description\"\n                required\n                value={state.description}\n                onChange={handleChange}\n              />\n            </label>\n            <button type=\"submit\">Submit</button>\n          </fieldset>\n        </Form>\n      )}\n    </Mutation>\n  );\n};\n\nexport default CreateItem;\nexport { CREATE_ITEM_MUTATION };\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAsBA;AACA;AACA;AACA;AACA;AALA;AArBA;AAAA;AAAA;AACA;AA4BA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAIA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AALA;AAAA;AASA;AACA;AAFA;AACA;AATA;AAOA;AAPA;AAAA;AACA;AADA;AAaA;AACA;AACA;AAfA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAgBA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAHA;AAAA;AACA;AADA;AAIA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAFA;AACA;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAjEA;AAuEA;AACA;AACA;;;;;A","sourceRoot":""}